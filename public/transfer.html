<!DOCTYPE html>
<html>
<head>
    <title>Send Ether</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, height=device-height">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Raleway" />
    <link rel="stylesheet" href="css/transfer.css">
</head>
<body id="transfer">
    <div id="loading" class="mdl-spinner mdl-js-spinner is-active" style="position:absolute;top:0;bottom:0;left:0;right:0;margin:auto;z-index:10;"></div>
    <div class="header">
        <div class="title">Send Ether</div>
        <div class="menu">
            <div class="content main">
                Make a Payment
            </div>
            <div class="content list">
                Recipient List
            </div>
            <div class="content history">
                Transaction History
            </div>
            <div class="selector"></div>
        </div>
    </div>
    <div class="body">
        <div class="main">
           <div class="form">
                <div class="input chain" style="margin-top:2rem;">
                    <label>Chain</label>
                    <div class="select-wrap">
                        <select name="chain">
                            <option value="mainnet">Mainnet</option>
                            <option value="ropsten">Ropsten</option>
                            <option value="rinkeby">Rinkeby</option>
                            <option value="kovan">Kovan</option>
                        </select>
                    </div>
                    <div class="message_alert"></div>
                </div>
                <div class="input sender">
                    <label>Sender's Private Key</label>
                    <input type="text" placeholder="adb5781108637c38a1b12891d6d856e83bfdde826887b9f4bb35368892e423a7" style="text-indent: 1.5em;">
                    <img id="qrscan-sender" src="data:image/png;base64,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" style="position:absolute;width:2rem;height:2rem;margin-top:-5.5rem;margin-left:2rem;" style="position:absolute;width:2rem;height:2rem;margin-top:-5.5rem;margin-left:2rem;"/>
                    <div class="message_alert"></div>
                    <div class="info-container" style="display:none;"></div>
                </div>
                <div class="input recipient">
                    <label>Recipient's Address / Scan Invoice / Bill / Remittance </label>
                    <input type="text" placeholder="0x5b878ba97bae92fc0aa6133edbf2f58d52350d65" style="text-indent: 1.5em;">
                    <img id="qrscan-recipient" src="data:image/png;base64,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" style="position:absolute;width:2rem;height:2rem;margin-top:-5.5rem;margin-left:2rem;" style="position:absolute;width:2rem;height:2rem;margin-top:-5.5rem;margin-left:2rem;"/>
                    <div class="message_alert"></div>
                </div>
                <div class="input amount">
                    <label>Amount</label>
                    <input type="tel" placeholder="0.001 Ether">
                    <div class="message_alert"></div>
                </div>
                <div class="input gas">
                    <label>Gas</label>
                    <input type="tel" placeholder="6 Gwei">
                    <div class="message_alert"></div>
                </div>
                <div class="btn_container">
                    <div class="btn send-ether" style="display:none;">Send Ether / Amis</div>
                </div>
            </div>
            <video id="preview" autoplay="autoplay" class="active" style="transform: scaleX(-1);"></video>
        </div>
        <div class="list">
            <div class="index">
                <div class="name">Name</div>
                <div class="address">Recipient</div>
            </div>
            <div class="info-container"></div>
        </div>
        <div class="history">
            <div class="info-container"></div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.4/Chart.min.js" defer></script>
    <script type="text/javascript" src="https://code.getmdl.io/1.3.0/material.min.js" defer></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/ethereum/web3.js/dist/web3.min.js"></script>
    <script type="text/javascript" src="https://rawgit.com/schmich/instascan-builds/master/instascan.min.js"></script>
    <script type="text/javascript" src="/lib/ethereum.js"></script>
    <script type="text/javascript">
      
        var controller = {
            init: function(){
                $(".header .menu .main").on("click",()=>{
                    view.showMain();
                });
                $(".header .menu .list").on("click",()=>{
                    view.showList();
                });
                $(".header .menu .history").on("click",()=>{
                    view.showHistory();
                });
                $("#qrscan-sender").on("click",()=>{
                    controller.qrScanSender();
                });
                $("#qrscan-recipient").on("click",()=>{
                    controller.qrScanRecipient();
                });
                $(".body .main .chain select").on("change",()=>{
                    model.showInfo($('.main .chain select').val(),$('.main .sender input').val());
                });
                $(".body .main .sender input").on("blur change",()=>{
                    model.showInfo($('.main .chain select').val(),$('.main .sender input').val());
                });   
                $('.main input').on('change blur',()=>{
                    validate.transferForm();
                });
                $('.main .btn_container .send-ether').on("click",()=>{
                    model.transfer(
                      $('.main .chain select').val(),
                      $('.main .sender input').val(),
                      $('.main .recipient input').val(),
                      parseFloat($('.main .amount input').val()),
                      parseFloat($('.main .gas input').val())
                    );
                });
                controller.swipe(('.body .main'),function(){view.showList();},function(){return false;});
                controller.swipe(('.body .list'),function(){view.showHistory();},function(){view.showMain();});
                controller.swipe(('.body .history'),function(){return false;},function(){view.showList();});
            },

            swipe:function(page,swipeLeft,swipeRight){
                $(page).on('touchstart', function (event) {
                    var position = event.originalEvent.changedTouches[0].pageX;
                    $(page).off('touchend');
                    $(page).on('touchend',  function (event) {
                        if (event.originalEvent.changedTouches[0].pageX < position - $(page).width() * 0.25){
                            swipeLeft();
                        }
                        else if(event.originalEvent.changedTouches[0].pageX > position + $(page).width() * 0.25){
                            swipeRight();
                        }
                    });
                });
            },
  
            setAddressList: function(){
                $(document).off('click', ".body .list .address");
                $(document).on('click', ".body .list .address", function(event){
                      event.preventDefault();
                      view.setRecipient($(this).text());
                });
                $(document).off('click', "i.edit");
                $(document).on('click', "i.edit", function(event){
                      event.preventDefault();
                      $(document).off('click', ".body .list .address");
                      view.editName($(this).data("address"));
                });
                $(document).off('click', "i.delete");
                $(document).on('click', "i.delete", function(event){
                      event.preventDefault();
                      if(confirm('Do you really delete this recipient?')){
                          var address = $(this).data("address");
                          view.deleteAddress(address);
                          setTimeout(()=>{
                              model.deleteAddress($('[data-address="'+address+'"].address').text());
                          }, 2000);               
                      }
                });
                $(document).off('click', "i.cancel");
                $(document).on('click', "i.cancel", function(event){
                      event.preventDefault();
                      model.setAddressList();
                });
                $(document).off('click', "i.update");
                $(document).on('click', "i.update", function(event){
                      event.preventDefault();
                      const address= $(this).data("address");
                      model.updateName( $('[data-address="'+address+'"].name').text(), $('[data-address="'+address+'"].address').text());
                });
            },
          
            qrScanSender: function(){
                var videoTag = document.getElementById('preview');
                var scanner = new Instascan.Scanner({ video: videoTag });

                scanner.addListener('scan', function (value) {
                    scanner.stop();
                    $('.main .sender input').val(value);
                    $('.main .form').show('slow');
                    model.showInfo($('.main .chain select').val(),$('.main .sender input').val());
                    validate.transferForm();
                });
                $("body").off("click");
                $("body").on("click",()=>{
                    scanner.stop();
                    $('.main .form').show('slow');
                });
                Instascan.Camera.getCameras()
                .then(function (cameras) {
                    if (cameras.length > 0) {
                        if(typeof cameras[1] !== 'undefined'){
                            scanner.start(cameras[1]); //BackCamera:cameras[1] 
                        }else{
                            scanner.start(cameras[0]); //FrontCamera:cameras[0]
                        }
                        $('.main .form').hide('slow');
                    }
                    else {
                        alert('No camera found.');
                    }
                })
                .catch(function(err) {
                    alert(err);
                });
            },
          
            qrScanRecipient: function(){
                var videoTag = document.getElementById('preview');
                var scanner = new Instascan.Scanner({ video: videoTag ,mirror: false});

                scanner.addListener('scan', function (value) {
                    scanner.stop();
                    var query = util.queryParse(value);
                    if(typeof query['price'] !== 'undefined'){
                        $('.main .chain select').val(query['chain']);
                        $('.main .recipient input').val(query['address']);
                        $('.main .amount input').val(query['price']);
                    }else{
                        $('.main .recipient input').val(value);
                    }
                    $('.main .form').show('slow');
                    validate.transferForm();
                });
                $("body").off("click");
                $("body").on("click",()=>{
                    scanner.stop();
                    $('.main .form').show('slow');
                });
                Instascan.Camera.getCameras()
                .then(function (cameras) {
                    if (cameras.length > 0) {
                        if(typeof cameras[1] !== 'undefined'){
                            scanner.start(cameras[1]); //BackCamera:cameras[1] 
                        }else{
                            scanner.start(cameras[0]); //FrontCamera:cameras[0]
                        }
                        $('.main .form').hide('slow');
                    }
                    else {
                        alert('No camera found.');
                    }
                })
                .catch(function(err) {
                    alert(err);
                });
            },
        };

      
        var view = {
            init: function(){
                $('#loading').hide();
            },

            showMain:function(){
                $('body').scrollTop(0);
                $('.header .selector').animate({'margin-left':'0'},'.1s');
                $('.body .main').animate({'margin-left':'0'},'.1s');
                $('.body .list').animate({'margin-left':'100%'},'.1s');
                $('.body .history').animate({'margin-left':'200%'},'.1s');
            },
          
            showList:function(){
                $('body').scrollTop(0);
                $('.header .selector').animate({'margin-left':'33.3333%'},'.1s');
                $('.body .main').animate({'margin-left':'-100%'},'.1s');
                $('.body .list').animate({'margin-left':'0'},'.1s');
                $('.body .history').animate({'margin-left':'100%'},'.1s');
                $('[data-list-edit]').show();
                $('[data-list-delete]').show();
                $('[data-list-cancel]').hide();
                $('[data-list-confirm]').hide();
            },
  
            showHistory:function(){
                $('body').scrollTop(0);
                $('.header .selector').animate({'margin-left':'66.6666%'},'.1s');
                $('.body .main').animate({'margin-left':'-200%'},'.1s');
                $('.body .list').animate({'margin-left':'-100%'},'.1s');
                $('.body .history').animate({'margin-left':'0'},'.1s');
            },
          
            showInfo: function(info){
                $(".body .main .info-container").hide();
                $(".body .main .info-container").empty();
                info.forEach((key)=>{
                     $(".body .main .info-container").append(
                         $("<div>").attr({ "class": "info"})
                             .append($("<div>").attr({ "class": "address" }).text('Address :  ' + key.address))
                             .append($("<div>").attr({ "class": "balance" }).text('Balance : ' + key.balance + ' Ether'))
                     );
                });
                $(".body .main .info-container").show("slow");
            },
          
            setRecipient: function(address){
                $(".body .main .recipient input").val(address);
                view.showMain();
            },
          
            setAddressList: function(addressList){
                $(".body .list .info-container").empty();
                addressList.forEach((key)=>{
                     $(".body .list .info-container").append(
                         $("<div>").attr({ "class": "info" , "data-address": key.address })
                             .append($("<div>").attr({ "class": "name", "data-address": key.address }).text(key.name))
                             .append($("<div>").attr({ "class": "address", "data-address": key.address }).text(key.address))
                             .append($("<i class='edit mdl-icon-toggle__label material-icons'>edit</i>").attr({"data-address": key.address}))
                             .append($("<i class='delete mdl-icon-toggle__label material-icons'>delete</i>").attr({"data-address": key.address}))
                             .append($("<i class='cancel mdl-icon-toggle__label material-icons'>cancel</i>").attr({"data-address": key.address}).css({"display":"none"}))
                             .append($("<i class='update mdl-icon-toggle__label material-icons'>check_circle</i>").attr({"data-address": key.address}).css({"display":"none"}))
                     );
                });
                $(".list .info .name").attr({"contenteditable": "false"});
                $(".list .info .address").attr({"contenteditable": "false"});
                controller.setAddressList();
            },
          
            showTransactionHistory: function(transactionList){
                $(".body .history .info-container").empty();
                transactionList.forEach((key)=>{
                     $(".body .history .info-container").append(
                         $("<div>").attr({ "class": "info"})
                             .append($("<div>").attr({ "class": "datetime"}).text(util.unixTimetoDate(key.timeStamp)))
                             .append($("<div>").attr({ "class": "from"}).text('From: '+key.from))
                             .append($("<div>").attr({ "class": "to"}).text('To: '+key.to))
                             .append($("<div>").attr({ "class": "amount"}).text('Amount: '+key.value*10e-19+' Ether'))
                     );
                });
                console.log(transactionList);
            },
          
            editName: function(address){
                $('i.edit[data-address="'+address+'"]').hide('slow');
                $('i.delete[data-address="'+address+'"]').hide('slow');
                $('i.cancel[data-address="'+address+'"]').show('slow');
                $('i.update[data-address="'+address+'"]').show('slow');
                $('i.edit[data-address!="'+address+'"]').show('slow');
                $('i.delete[data-address!="'+address+'"]').show('slow');
                $('i.cancel[data-address!="'+address+'"]').hide('slow');
                $('i.update[data-address!="'+address+'"]').hide('slow');
                $('[data-address="'+address+'"].name').attr({"contenteditable": "true"});
                $('[data-address!="'+address+'"].name').attr({"contenteditable": "false"});
            },
          
            deleteAddress: function(address){
                $('.info[data-address="'+address+'"]').children().hide('slow');
                $('.info[data-address="'+address+'"]').animate({'height':0},100);
            }
        };


        var model = {
            ether:{},

            init: function(ether){
                model.ether = ether;
                model.setAddressList();
                model.showTransactionHistory();
            },

            showInfo: function(chain,secret){
                const account  = model.ether.getAccountFromSecret(chain,secret);
                if(account){
                    view.showInfo([{'address':account.address,'balance':account.balance}]);
                }
            },

           showTransactionHistory: function(){
                if (typeof localStorage.addressList !== 'undefined') {
                      var addressList = JSON.parse(localStorage.getItem("addressList"));
                      var transactionListRaw = [];
                      addressList.forEach((key)=>{
                           Array.prototype.push.apply(transactionListRaw, model.ether.getTransactionHistory(key.chain,key.address));
                      });
                      var transactionList = util.distinctArrayByKey(transactionListRaw,'hash')
                      transactionList.sort(function(a, b) {
                          return (a.timeStamp < b.timeStamp) ? 1 : -1; //desc
                      });
                      view.showTransactionHistory(transactionList);
                }
                else {
                      return false;
                }
            },

            setAddressList: function(){
                if (typeof localStorage.recipientList !== 'undefined') {
                      var addressList = JSON.parse(localStorage.getItem("recipientList"));
                      addressList.sort(function(a, b) {
                          return (a.name < b.name) ? -1 : 1; //asc
                      });
                      view.setAddressList(addressList);
                }
                else {
                      return false;
                }
            },

            deleteAddress: function(address){
                if (typeof localStorage.recipientList !== 'undefined') {
                      var addressList = JSON.parse(localStorage.getItem("recipientList"));
                      var addressArray =[];
                      addressList.forEach((key)=>{
                            addressArray.push(key.address);
                      });
                      var idx = addressArray.indexOf(address);
                      addressList.splice(idx,1);
                      localStorage.setItem("recipientList", JSON.stringify(addressList));
                      model.setAddressList();
                }
                else {
                      return false;
                }
            },

            updateName: function(name,address){
                if (typeof localStorage.recipientList !== 'undefined') {
                      var addressList = JSON.parse(localStorage.getItem("recipientList"));
                      var addressArray =[];
                      addressList.forEach((key)=>{
                            addressArray.push(key.address);
                      });
                      var idx = addressArray.indexOf(address);
                      addressList[idx] = {"name":name,"chain":addressList[idx].chain,"address":address};
                      localStorage.setItem("recipientList", JSON.stringify(addressList));
                      model.setAddressList();
                }
                else {
                      return false;
                }
            },

            addAddress: function(name,chain,address){
                var newAddress = {"name":name,"chain":chain,"address":address};

                if (typeof localStorage.recipientList !== 'undefined') {
                      var addressList = JSON.parse(localStorage.getItem("recipientList"));
                      var addressArray =[];
                      addressList.forEach((key)=>{
                            addressArray.push(key.address);
                      });
                      var idx = addressArray.indexOf(newAddress.address);
                      if (idx == -1) {
                            addressList.push(newAddress);
                            localStorage.setItem("recipientList", JSON.stringify(addressList));
                            model.setAddressList();
                            view.showList();
                      }
                      else{
                            return false;
                      }
                }
                else {
                    var addressList = [];
                    addressList.push(newAddress);
                    localStorage.setItem("recipientList", JSON.stringify(addressList));
                    model.setAddressList();
                }
            },

            transfer: function(chain,secret,sendTo,amount,gas){
                model.ether.transfer(chain,secret,sendTo,amount,gas).then(function(txHash){
                      alert('Payment completes successfully.');
                      model.addAddress(util.dateString(),chain,sendTo);
                      view.showList();

                }).catch(function(err){
                      alert(err);
                });
            }

        };

        var Ether = (function() {

            var Ether = function(require) {
                if(!(this instanceof Ether)) {
                    return new Ether(require);
                }
                this.Util = require('ethereumjs-util');
                this.Tx = require('ethereumjs-tx');
            }

            Ether.prototype.setChain = function(chain){
                    switch(chain){
                    case 'mainnet':
                        return {'node':'https://mainnet.infura.io/','api':'https://api.etherscan.io/api','id':1};
                        break;
                    case 'ropsten':              
                        return {'node':'https://ropsten.infura.io/','api':'https://api-ropsten.etherscan.io/api','id':3};
                        break;
                    case 'rinkeby':              
                        return {'node':'https://rinkeby.infura.io/','api':'https://api-rinkeby.etherscan.io/api','id':4};
                        break;
                    case 'kovan':              
                        return {'node':'https://kovan.infura.io/','api':'https://api-kovan.etherscan.io/api','id':42};
                        break;
                    default:
                        return {'node':'https://mainnet.infura.io/','api':'https://api.etherscan.io/api','id':1};
                        break;
                }
            }

            Ether.prototype.validateAddress = function(address){
                var valid = true;
                if(String(address) == ''){
                    valid = false;
                }
                else if(
                        String(address).length != 42
                    || !String(address).match(/^[0-9a-zA-Z]/)
                    || !(String(address).slice(0,2)=='0x')
                ){
                    valid = false;
                }
                return valid;
            }

            Ether.prototype.validateSecret = function(secret){
                var valid = true;
                if(String(secret) == ''){
                    valid = false;
                }
                else if(
                        String(secret).length != 64
                    || !String(secret).match(/^[0-9a-z]/)
                ){
                    valid = false;
                }
                return valid;
            }

            Ether.prototype.getBalance = function(chain,address){
                const web3 = new Web3(new Web3.providers.HttpProvider(this.setChain(chain).node));
                if(this.validateAddress(address)){
                      return web3.fromWei(web3.eth.getBalance(address), "ether").toNumber();
                }
                else{
                      return false;
                }
            }

            Ether.prototype.getAccountFromSecret = function(chain,secret){
                if(this.validateSecret(secret)){
                      const web3 = new Web3(new Web3.providers.HttpProvider(this.setChain(chain).node));
                      var privkey = this.Util.toBuffer('0x'+ secret);
                      var address = '0x' + this.Util.privateToAddress(privkey).toString('hex');
                      if(this.validateAddress(address)){
                            return {'address':address,'balance':web3.fromWei(web3.eth.getBalance(address), "ether").toNumber()};
                      }
                      else{
                            return false;
                      }
                }
                else{
                      return false;
                }
            }

            Ether.prototype.getTransactionHistory = function(chain,address){
                  const web3 = new Web3(new Web3.providers.HttpProvider(this.setChain(chain).node));
                  const currentBlock = web3.eth.blockNumber;
                  const reqBody = {
                    'module':'account',
                    'action':'txlist',
                    'address':address,
                    'startblock':0,
                    'endblock':currentBlock,
                    'page':1,
                    'offset':10, //Max count of history
                    'sort':'asc',
                    'apikey':''
                  }
                  const res = $.ajax({
                      url: this.setChain(chain).api,
                      type: "GET",
                      dataType: "json",
                      data: reqBody,
                      async:false,
                  }).responseText;

                  return JSON.parse(res).result;
            }          

            Ether.prototype.transfer = function(chain,secret,sendTo,amount,gas){
                const web3 = new Web3(new Web3.providers.HttpProvider(this.setChain(chain).node));

                return new Promise((resolve, reject) => {
                    if(!this.validateSecret(secret)){
                            reject('Invalid secret.')
                    }
                    if(!this.validateAddress(sendTo)){
                            reject('Destination address is invalid.')
                    }
                    if(typeof(amount)!=='number' || amount<0){
                            reject('Invalid amount.')
                    }
                    var account = this.getAccountFromSecret(chain,secret);

                    web3.eth.getTransactionCount(account.address, (err,txCount) => {
                        var privKey = this.Util.toBuffer('0x'+ secret);
                        var rawTx = {
                            nonce: web3.toHex(txCount),
                            gasPrice: web3.toHex(web3.toWei(gas, 'gwei')),
                            gasLimit: web3.toHex(21000),
                            to: sendTo,
                            value: web3.toHex(web3.toWei(amount, 'ether')),  
                            data:null,
                            chainId: this.setChain(chain).id
                        }

                        var tx = new this.Tx(rawTx);
                        tx.sign(privKey);

                        var signedTx = tx.serialize();

                        web3.eth.sendRawTransaction('0x' + signedTx.toString('hex'),(err, txHash)=>{
                            if(err) {
                                reject(err);
                            } else {
                                resolve(txHash);
                            }
                        });
                    });
                });
             }
            return Ether;
        })();

      
        var util = {
            dateString:function(){
                var d = new Date();
                var year = d.getFullYear();
                var month = d.getMonth();
                var date = d.getDate();
                var date = ('00'+year).slice(-2) + ('00'+month).slice(-2) + ('00'+date).slice(-2);
                return date;
            },
          
            unixTimetoDate:function(UNIX_timestamp){
                var d = new Date(UNIX_timestamp * 1000);
                var months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
                var year = d.getFullYear();
                // var month = months[d.getMonth()];
                var month = d.getMonth();
                var date = d.getDate();
                var hour = d.getHours();
                var min = d.getMinutes();
                var datetime =
                    ('0000'+year).slice(-4) +
                    '/' +
                    ('00'+month).slice(-2) + 
                    '/' +
                    ('00'+date).slice(-2) +
                    '  ' + 
                    ('00'+hour).slice(-2)  + ':' + ('00'+min).slice(-2) ;
                return datetime;
            },
          
            distinctArrayByKey:function(array,key){
                var obj = {};
                for (var i = 0; i < array.length; i++) {
                  obj[array[i][key]] = array[i];
                }
                var newArray = [];
                for (var i in obj) {
                  newArray.push(obj[i]);
                }
                return newArray;
            },
          
            queryParse: function(text, sep, eq, isDecode) {
                text = text || location.search.substr(1);
                sep = sep || '&';
                eq = eq || '=';
                var decode = (isDecode) ? decodeURIComponent : function(a) { return a; };
                return text.split(sep).reduce(function(obj, v) {
                  var pair = v.split(eq);
                  obj[pair[0]] = decode(pair[1]);
                  return obj;
              }, {});
            }
        }
     
        
        var validate = {
            transferForm: function(){
                $(".main .message_alert").empty();

                $('.main .sender input').each(function(){
                    if($(this).val() == ''){
                        $(".main .sender  .message_alert").text("Sender's private key is required.");
                    }
                    else if(
                            String($(this).val()).length != 64 
                        || !String($(this).val()).match(/^[0-9a-z]/)
                    ){
                        $(".main .sender .message_alert").text('Please enter a valid private key.');
                    }
                    else{
                        $(".main .sender .message_alert").empty();
                    }
                });


                $('.main .recipient input').each(function(){
                    if($(this).val() == ''){
                        $(".main .recipient .message_alert").text('Recipient address is required.');
                    }
                    else if(
                            String($(this).val()).length != 42 
                        || !String($(this).val()).match(/^[0-9a-zA-Z]/)
                        || !(String($(this).val()).slice(0,2)=='0x')
                    ){
                        $(".main .recipient .message_alert").text('Please enter a valid Ethereum address.');
                    }
                    else{
                        $(".main .recipient .message_alert").empty();
                    }
                });

                $('.main .amount input').each(function(){
                    if($(this).val() == ''){
                        $(".main .amount .message_alert").text('Transfer amount is required.');
                    }
                    else if(!isFinite($(this).val())){
                        $(".main .amount .message_alert").text('Only number format is allowed.');
                    }
                    else if($(this).val() <= 0){
                        $(".main .amount .message_alert").text('Non-positive values are not allowed.');
                    }
                    else{
                        $(".main .amount .message_alert").empty();
                    }
                });
              
                $('.main .gas input').each(function(){
                    if($(this).val() == ''){
                        $(".main .gas .message_alert").text('Transfer amount is required.');
                    }
                    else if(!isFinite($(this).val())){
                        $(".main .gas .message_alert").text('Only number format is allowed.');
                    }
                    else if($(this).val() <= 0){
                        $(".main .gas .message_alert").text('Non-positive values are not allowed.');
                    }
                    else{
                        $(".main .gas .message_alert").empty();
                    }
                });
              
                var valid=true;
                $(".main .message_alert").each( function() {
                    if($(this).text()!=''){
                        valid = false;
                    }
                });
                if(valid){
                    $(".main .btn").fadeIn('swing');
                }
                else{
                    $(".main .btn").fadeOut('swing');
                }
            }
        };
      
        var script = {
            onload : function(require){
                const ether = new Ether(require);
                model.init(ether);
                view.init();
                controller.init();
            }
        }
      </script>
      <script type="text/javascript" src="lib/ethereumjs.js"></script>
</body>
</html>